// Sensor pins
const int soilPin = A0;
const int rainPin = A1;
const int ldrPin = A2;

// Output pins
const int relayPin = 8;
const int ledSoilDry = 2;
const int ledNoRain = 3;
const int ledDark = 4;
const int ledPump = 5;

// Threshold values (adjust based on calibration)
const int soilDryThreshold = 500;     // Above this = dry
const int rainDetectedThreshold = 400; // Below this = raining
const int morningLightMin = 200;      // Above this = some light
const int sunlightMax = 800;          // Below this = not too bright
const int darkThreshold = 150;        // Below this = dark

void setup() {
  // Initialize outputs
  pinMode(relayPin, OUTPUT);
  pinMode(ledSoilDry, OUTPUT);
  pinMode(ledNoRain, OUTPUT);
  pinMode(ledDark, OUTPUT);
  pinMode(ledPump, OUTPUT);

  digitalWrite(relayPin, HIGH); // OFF initially (relay active LOW)

  Serial.begin(9600);
}

void loop() {
  // Read sensors
  int soilValue = analogRead(soilPin);
  int rainValue = analogRead(rainPin);
  int lightValue = analogRead(ldrPin);

  Serial.print("Soil: "); Serial.print(soilValue);
  Serial.print(" | Rain: "); Serial.print(rainValue);
  Serial.print(" | Light: "); Serial.println(lightValue);

  // Determine conditions
  bool isSoilDry = soilValue > soilDryThreshold;
  bool isRaining = rainValue < rainDetectedThreshold;
  bool isMorning = lightValue > morningLightMin && lightValue < sunlightMax;
  bool isDark = lightValue < darkThreshold;
  bool pumpCondition = isSoilDry && !isRaining && isMorning;

  // LED indicators
  digitalWrite(ledSoilDry, isSoilDry ? HIGH : LOW);
  digitalWrite(ledNoRain, !isRaining ? HIGH : LOW);
  digitalWrite(ledDark, isDark ? HIGH : LOW);

  // Relay and pump LED
  if (pumpCondition) {
    digitalWrite(relayPin, LOW); // ON
    digitalWrite(ledPump, HIGH);
    Serial.println("Pump ON");
  } else {
    digitalWrite(relayPin, HIGH); // OFF
    digitalWrite(ledPump, LOW);
    Serial.println("Pump OFF");
  }

  delay(2000); // 2-second delay
}
Mode(ledSoilDry, OUTPUT);
  pinMode(ledNoRain, OUTPUT);
  pinMode(ledDark, OUTPUT);
  pinMode(ledPump, OUTPUT);

  digitalWrite(relayPin, HIGH); // OFF initially (relay active LOW)

  Serial.begin(9600);
}

void loop() {
  // Read sensors
  int soilValue = analogRead(soilPin);
  int rainValue = analogRead(rainPin);
  int lightValue = analogRead(ldrPin);

  Serial.print("Soil: "); Serial.print(soilValue);
  Serial.print(" | Rain: "); Serial.print(rainValue);
  Serial.print(" | Light: "); Serial.println(lightValue);

  // Determine conditions
  bool isSoilDry = soilValue > soilDryThreshold;
  bool isRaining = rainValue < rainDetectedThreshold;
  bool isMorning = lightValue > morningLightMin && lightValue < sunlightMax;
  bool isDark = lightValue < darkThreshold;
  bool pumpCondition = isSoilDry && !isRaining && isMorning;

  // LED indicators
  digitalWrite(ledSoilDry, isSoilDry ? HIGH : LOW);
  digitalWrite(ledNoRain, !isRaining ? HIGH : LOW);
  digitalWrite(ledDark, isDark ? HIGH : LOW);

  // Relay and pump LED
  if (pumpCondition) {
    digitalWrite(relayPin, LOW); // ON
    digitalWrite(ledPump, HIGH);
    Serial.println("Pump ON");
  } else {
    digitalWrite(relayPin, HIGH); // OFF
    digitalWrite(ledPump, LOW);
    Serial.println("Pump OFF");
  }

  delay(2000); // 2-second delay
}
Mode(ledDark, OUTPUT);
  pinMode(ledPump, OUTPUT);

  digitalWrite(relayPin, HIGH); // OFF initially (relay active LOW)

  Serial.begin(9600);
}

void loop() {
  // Read sensors
  int soilValue = analogRead(soilPin);
  int rainValue = analogRead(rainPin);
  int lightValue = analogRead(ldrPin);

  Serial.print("Soil: "); Serial.print(soilValue);
  Serial.print(" | Rain: "); Serial.print(rainValue);
  Serial.print(" | Light: "); Serial.println(lightValue);

  // Determine conditions
  bool isSoilDry = soilValue > soilDryThreshold;
  bool isRaining = rainValue < rainDetectedThreshold;
  bool isMorning = lightValue > morningLightMin && lightValue < sunlightMax;
  bool isDark = lightValue < darkThreshold;
  bool pumpCondition = isSoilDry && !isRaining && isMorning;

  // LED indicators
  digitalWrite(ledSoilDry, isSoilDry ? HIGH : LOW);
  digitalWrite(ledNoRain, !isRaining ? HIGH : LOW);
  digitalWrite(ledDark, isDark ? HIGH : LOW);

  // Relay and pump LED
  if (pumpCondition) {
    digitalWrite(relayPin, LOW); // ON
    digitalWrite(ledPump, HIGH);
    Serial.println("Pump ON");
  } else {
    digitalWrite(relayPin, HIGH); // OFF
    digitalWrite(ledPump, LOW);
    Serial.println("Pump OFF");
  }

  delay(2000); // 2-second delay
}
{
    digitalWrite(relayPin, HIGH); // Turn OFF pump
    Serial.println("Pump OFF");
  }

  delay(2000); // Delay between checks
}
